---
title: "Toronto Shelter System and Homeless Resources"
author: "V4UL"
date: "`r Sys.Date()`"
output: 
  flexdashboard::flex_dashboard:
    logo: V4UL_nav_logo_48px.png
    orientation: columns
    navbar:
        - { icon: "fa-solid fa-house", href: "https://www.unhousedliberation.ca/", align: right}
        - { icon: "fa-envelope", href: "sheltervoices@gmail.com", align: right}
        - { icon: "fa-instagram", href: "https://www.instagram.com/shelterhotelsto/", align: right}
  vertical_layout: fill
    
---

<style>

/* ========================== */
/*         TABLE CSS          */
/* ========================== */

.Table {
  border-collapse: collapse;
  overflow: auto;
  width: 100%
  margin: 1px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.55);
}

.Table thead tr {
  border: 2px solid;
  padding: 1px;
  text-align: center;
  text: bold;
}

.Table thead th {
  border: 2px solid;
  text-align: center;
  text: bold;
  font-size: 24px;
}

.Table thead th.f18 {
  border: 2px solid;
  text-align: center;
  text: bold;
  font-size: 18px;
}

.Table tbody td {
  border: 2px solid;
  text-align: left;
  text: bold;
  font-size: 14px;
  padding: 5px;
  background-color: white;
}

.Table tbody td.tmid {
  border: 2px solid;
  text-align: center;
  text: bold;
  font-size: 14px;
  padding: 5px;
  background-color: white;
}

td:first-child + td {text-align: center;}

td:first-child + td + td.tcell {text-align: center;}

.Table tbody tr {border-bottom: 2px solid #dddddd;}

.Table tbody tr:last-of-type {border-bottom: 2px solid #009879;}


/* =============================== */
/*          CSS for Links          */
/* =============================== */

a.one:link {color: rgb(0, 0, 200);}
a.one:visited {color: rgb(192, 20, 172);}
a.one:hover {color: rgb(255, 20, 100);}

/* ============================== */
/*     CSS for stylizing text     */
/* ============================== */

body{font-size: 14pt;}

#BBlk {
  font-weight: bold;
  color: rgb(0, 0, 0);
  border: 2px solid black;
  margin: 1px;
  }

#Blk20 {
  color: black;
  font-size: 20px;
  }

#Blk20L {
  color: black;
  font-size: 20px;
  text-align: left;
  }

#BBlk20 {
  font-weight: bold;
  color: black;
  font-size: 20px;
  }

#BBlk20L {
  font-weight: bold;
  color: black;
  font-size: 20px;
  text-align: left;
  }

#Blk { font-weight: bold; color: rgb(0, 0, 0); }
#Red { font-weight: bold; color: rgb(255, 10, 20); }
#Red2 { font-weight: bold; color: rgb(255, 50, 50); }
#Dred { font-weight: bold; color: rgb(175, 0, 0); }
#Or { font-weight: bold; color: rgb(255, 140, 0); }
#Or2 { font-weight: bold; color: rgb(245, 180, 0); }
#Gold { font-weight: bold; color: rgb(230, 190, 0); }
#Ly { font-weight: bold; color: rgb(200, 200, 0); }
#Gr1 { font-weight: bold; color: rgb(25, 200, 25); }
#Gr2 { font-weight: bold; color: rgb(25, 150, 25); }
#Gr3 { font-weight: bold; color: rgb(25, 100, 25); }
#Blue { font-weight: bold; color: blue; }
#Db2 { font-weight: bold; color: rgb(0, 0, 100); }
#Teal { font-weight: bold; color: rgb(60, 180, 180); }
#Glacialb { font-weight: bold; color: rgb(54, 139, 193); }
#Lb1 { font-weight: bold; color: rgb(50, 215, 255); }
#Lb2 { font-weight: bold; color: rgb(50, 155, 255); }
#Lb3 { font-weight: bold; color: rgb(50, 115, 255); }
#Violet { font-weight: bold; color: rgb(180, 73, 255); }
#Purple { font-weight: bold; color: rgb(150, 0, 255); }
#Dpurp { font-weight: bold; color: rgb(95, 0, 161); }
#Magenta { font-weight: bold; color: rgb(255, 0, 255); }
#Coral { font-weight: bold; color: rgb(255, 127, 80); }
#Crim { font-weight: bold; color: rgb(220, 20, 60); }
#Rasp { font-weight: bold; color: rgb(227, 11, 92); }
#Lgray { font-weight: bold; color: rgb(190, 190, 190); }
#Gray { font-weight: bold; color: rgb(155, 155, 155); }
#Gray2 { font-weight: bold; color: rgb(215, 200, 200); }
#Dgray { font-weight: bold; color: rgb(95, 95, 95); }
#Br { font-weight: bold; color: rgb(165, 42, 42); }
#Rust { font-weight: bold; color: rgb(183, 65, 14); }
#Dbr { font-weight: bold; color: rgb(100, 20, 20); }
#Zinc { font-weight: bold; color: rgb(140, 209, 187); }
#Zinc2 { font-weight: bold; color: rgb(0, 102, 102); }
</style>


```{r setup, include=FALSE}

library(pacman)
pacman::p_load(
  flexdashboard,
  ### 1.3.0 packages includes:
  ### "ggplot2" grammar of Graphics
  ### "dplyr" functions (select, filter) for data manipulation
  ### "tidyr" set of functions to tidy data
  ### "readr" read rectangular csv data
  ### "purrr" for working with functions and vectors
  ### "tibble" quick simple data frame
  ### "stringr" functions for manipulating character strings
  ### "forcats" tools for dealing with "factors"
  tidyverse,
  leaflet,    ### "Leaflet" creates map widget with "htmlwidgets"
  htmltools,  ### use html code to customize UI
  sp,     ### spatial data
  sf,     ### "simple features" deals with 'spacial type' data (ie. st_sp)
  scales, ### scales mapped to 'aes' function (breaks, axes labels, legends)
  rio,        ### "rio" importing data 
  here,       ### creating relative paths to data files 
  ggExtra,    ### add marginal histograms/boxplots/density plots to 
              ### 'ggplot2' scatterplots
  ggpubr,     ### create customized 'ggplot2' for publication
  lubridate,  ### deal with "date" type values
  kableExtra, ### add features to "kable" output using 'pipe' operator
  fs,         ### file system (e.g. 'dir_ls()' = list files)
  skimr,      ### display summary stats (e.g. skim(iris))
  janitor,    ### examine, clean, apply stats to data frames
              ### e.g. convert_to_NA(data, strings)
  shiny,      ### interactive web applications
  plotly,     ### interactive graphs/plots
  patchwork,  ### combine separate ggplots into same graphic
  cowplot,    ### create multipanel plots
  naniar,     ### data structures, functions facilitate plotting missing values
  DescTools,  ### misc stats 'description' functions, wrappers for data
  shiny,      ### interactive web applications, needed for "esquisse" package
  esquisse    ### 'shiny' gadget to create 'ggplot2' figures interactively
  )

```

Interactive Map {data-icon="ion-stats-bars"}
===================================== 

Column {data-width=550}
-----------------------------------------------------------------------

### GTA Map of Homeless Resources

```{r include=FALSE}
#### read in data file
ToHRes.data <- readr::read_csv(here("Datasets", "ToHResources.csv"))

### Apply **rowSums** function to "quantify" amount of Services per site
### Add new column "row_sum" 
ToHRes.data$row_sum <- rowSums(ToHRes.data[ , c(9:18)], na.rm=TRUE)

### convert class of row_sum ==> numeric to integer
ToHRes.data %>% mutate(row_sum = as.integer(row_sum))

```


```{r include=FALSE}
#### Add different provider tiles (i.e. layers)
#### Assign each map layer a name
#### Add a layer control (top right)
TOmap <- leaflet() %>%
  addProviderTiles("OpenStreetMap",
                   group = "OpenStreetMap") %>%
  addProviderTiles("Esri.WorldStreetMap",
                   group = "Esri.WorldStreetMap") %>%
  addProviderTiles("CartoDB.Positron",
                   group = "CartoDB.Positron") %>%
  addProviderTiles("Esri.WorldImagery",
                   group = "Esri.WorldImagery") %>%
  addLayersControl(baseGroups = c("OpenStreetMap",
                                  "Esri.WorldStreetMap",
                                  "CartoDB.Positron",
                                  "Esri.WorldImagery"),
                   position = "topleft")

#### Centre the Map view to Yonge & Bloor, and set the zoom level
TOmap <- TOmap %>% setView(-79.38681892548695,43.670216153303066,
                   zoom = 12)

# Ensure VALID UTF-8 encoded characters in the `Name` column
Encoding(x = ToHRes.data$Name) <- "UTF-8"
Encoding(x = ToHRes.data$Location) <- "UTF-8"
Encoding(x = ToHRes.data$MealTime) <- "UTF-8"
Encoding(x = ToHRes.data$Open) <- "UTF-8"

# replace all non UTF-8 character strings with an empty space
ToHRes.data$Name <- iconv(x = ToHRes.data$Name,
                          from = "UTF-8",
                          to = "UTF-8",
                          sub = "")

ToHRes.data$Location <- iconv(x = ToHRes.data$Location,
                          from = "UTF-8",
                          to = "UTF-8",
                          sub = "")

ToHRes.data$MealTime <- iconv(x = ToHRes.data$MealTime,
                          from = "UTF-8",
                          to = "UTF-8",
                          sub = "")

ToHRes.data$Open <- iconv(x = ToHRes.data$Open,
                          from = "UTF-8",
                          to = "UTF-8",
                          sub = "")


```


```{r}
#### Add markers with custom labels for each Resource site
TOmap2 <- TOmap %>% addMarkers(data = ToHRes.data,
                               label = paste("Name: ",
                                             ToHRes.data$Name,
                                             "<br>",
                                             "Location: ",
                                             ToHRes.data$Location,
                                             "<br>",
                                             "Ph: ",
                                             ToHRes.data$Phone,
                                             "<br>",
                                             "Open: ",
                                             ToHRes.data$Open) %>%
                                 lapply(htmltools::HTML))

# Call/Show Map
TOmap2

```




Column {data-width=400}
-----------------------------------------------------------------------

### Table: GTA Homeless Resources

```{r}

# select columns for new df to create table
ToHRes.data1 <- select(ToHRes.data, 2,3,4,19,20)

ToHRes.data1 %>% knitr::kable()

```


Information {data-icon="fa-info-circle"}
===================================== 

Column {.tabset .tabset-fade}
-----------------------------------------------------------------------

### Canadian Homeless Shelter System - A National Failure

<br>

&nbsp; &nbsp; Eradicating **Homelessness** has long been a "*dream*" of activists and non-activists alike. Its a problem that resonates with most Canadians today since many are facing similar precarious housing situations. The lack of safe and affordable housing is a critical social and economic problem that political leaders have long ignored or offered weak ineffectively solutions.<br>
&nbsp; &nbsp; One of the major problems in addressing homelessness is the lack of transparency - we simply <u>still</u> do not know how many people are homeless in Canada. Current efforts aimed at "*counting*" this growing population are far from complete and rarely done in an expedient manner. Homelessness is one of the most pressing social issues of our times and therefore worthy of much more meaningful thought and timely solutions. Open access to accurate and up-to-date information about the number of homeless people in every community is the only <u>rational</u> and meaningful way of measuring and accessing the "*true*" size of this problem. Effective policies that address homelessness are only made possible by accurately measuring the problem itself (i.e. baseline) and the outcomes of any proposed policy. Yearly census or surveys of homelessness in select communities falls far short of this objective. Homelessness should not be treated like the Audubon Christmas Bird Count (CBC), where people often sit from the comfort of their homes enumerating birds that happen to fly up to their backyard feeders, only to be forgotten about until next Christmas.<br>
&nbsp; &nbsp; It therefore comes as no surprise that some of the <u>latest</u> government offerings, such as **National Service Provider List** (2022)**<sup>1,2</sup>** and **Infrastructure Canada's** **Homeless Shelter Capacity Point-in-Time Counts** (2022)**<sup>1,3</sup>**, showcase the current lacklustre approaches to homelessness. Daily updates, not yearly updates, as well as <u>open</u> access to a standardized information <u>sharing</u> system needs to be in place in every community. In this way much more reliable and accurate information can be collected and accessed by <u>all</u> community stake holders. Allocating appropriate levels of funding to help fix a problem is impossible if you don't know the extent and nature of the problem. Band-aide solutions do little and often leads to a "*commoditization*" of homelessness and the poor. There is obviously much more that can be done then simply making "lists" that often serves to only highlight our short comings.<br>
&nbsp; &nbsp; According to the **NSPL** data (**Fig. 1**) there were approximately 30,402 permanent beds provided by 1,120 emergency and transitional housing shelter services in different parts of Canada in 2022. By comparison Infrastructure Canada's "*Point-in-Time*" (**PiT**) data (2022) shows that in some 72 communities and regions across Canada there were an estimated 39,713 beds provided by 1,725 shelters (**Fig. 2**). The discrepancies between these two 2022 lists tell us that we don't even know the "*true*" number of shelter service providers in the country. Our commitment to solving this key social issues is severely compromised if we don't know the size of the homeless population nor the size and extent of our response. Successful policies depend on useful, accurate, and timely information. It also has to be shared since information and power are "*two-sides of the same coin*" and must be carefully weighed by the scales of justice.

<br>
<br>

<div align=center>
**National Service Provider List (2022)**<br>

```{r echo=FALSE, message=FALSE, warning=FALSE, fig.height=6, fig.width=7, fig.align='center'}
#### read in data file
NSPL.df <- readr::read_csv(here("Datasets", "HPD_NSPL2022.csv"))

### Change Column Names using **rename** function of "dplyr" package
lookup <- c(PBeds = "Number Permanent Beds", SType = "Shelter Type")
NSPL.df <- rename(NSPL.df, all_of(lookup))

### Character strings of "City" column declared to be encoded in "UTF-8"
### which can be read by the 'Encoding' base function, returns char vector
Encoding(NSPL.df$City) <- "UTF-8"

### trans-literate accented characters for entire df using 'mutate' function
NSPL.df <- NSPL.df %>%
  mutate(across(.cols = everything(),
                .fns = ~ stringi::stri_trans_general(., id = "Latin-ASCII")))

### change PBeds values back to "numeric" 
NSPL.df$PBeds <- as.numeric(NSPL.df$PBeds)

### group by Prov/Ter, count observations and sum # Perm. Beds per Prov/Terr
NSPL.df1 <- NSPL.df %>%
  group_by(PTCode) %>%
  summarise(n_observ = n(), PBeds = sum(PBeds))

NSPL.PBeds.sum <- sum(NSPL.df1$PBeds)
NSPL.shelter.sum <- sum(NSPL.df1$n_observ)

### plot
NSPLplot <- ggplot(NSPL.df1) + aes(x = PTCode, y = PBeds) +
  geom_col(fill = "darkblue") +
  labs(x = "Region (Provinces, Territories)",
       y = "Total # Permanent Beds") +
  theme_bw() +
  theme(axis.title.y = element_text(size = 12L, face = "bold"),
        axis.title.x = element_text(size = 12L, face = "bold"),
        axis.text.x = element_text(size = 10L, face = "bold"),
        axis.text.y = element_text(size = 10L, face = "bold"),
        plot.background = element_rect(fill = "white"),
        panel.grid.minor = element_blank())

### Create Interactive Plot with "ggplotly" package
NSPLplotly <- ggplotly(NSPLplot)
NSPLplotly <- NSPLplotly %>% toWebGL()
NSPLplotly

```

</div>
**Figure 1: 2022 National Service Provider List (NSPL).** The graph shows the total number of permanent beds provided by various emergency and transitional homeless shelters from each Canadian province and territory. According to the Homelessness Policy Directorate of Infrastructure Canada there were 30,402 beds provided by 1,120 shelters in 2022.**<sup>1,2</sup>**  

<br>
<br>

```{r echo=FALSE, message=FALSE, warning=FALSE}
### Homeless Shelter Capacity 2016-2022 Infrastructure Canada Pit data
Pit.df <- readr::read_csv(here("Datasets", "14100353.csv"))
Pit.df1 <- Pit.df %>% select(, 1:6,13)
Pit.df1.ca <- subset(Pit.df1, GEO == "Canada")
rm(Pit.df)

### Change Column Names using **rename** function of "dplyr" package
NO.Col <- c(Date = "REF_DATE", Stype = "Type of shelter", Tpop = "Target population")
Pit.df1.ca <- rename(Pit.df1.ca, all_of(NO.Col))
Pit.df2.ca <- subset(Pit.df1.ca, Tpop == "Total, target population")

### Sum number of beds per year
Pit.Bsum <- Pit.df2.ca %>%
  group_by(Date) %>% filter(Statistics == "Number of beds") %>% 
  summarise(n_observ = n(), Bsum = sum(VALUE))

### Sum number of shelters per year
Pit.Ssum <- Pit.df2.ca %>%
  group_by(Date) %>% filter(Statistics == "Number of shelters") %>% 
  summarise(n_observ = n(), Bsum = sum(VALUE))

### Merge sum dfs
Pit.BSsum <- merge(Pit.Ssum, Pit.Bsum, by = c("Date", "Date"))

### Change Column Names with "dplyr" **rename** function
### remove redundant column
NO.Col2 <- c(n_observ = "n_observ.x", Ssum = "Bsum.x", Bsum = "Bsum.y")
Pit.BSsum <- rename(Pit.BSsum, all_of(NO.Col2))
Pit.BSsum <- Pit.BSsum %>% select(-4)

### remove old df
rm(Pit.Ssum, Pit.Bsum)

```

<div align=center>
**Figure 2: Provincial and Territorial Homeless Shelter Capacity**<br>
**(Point-in-Time Count Data: 2016 - 2022)**<br>

```{r echo=FALSE, message=FALSE, warning=FALSE, fig.height=11, fig.width=8, fig.align='center'}
Yuk <- Pit.df1 %>% subset(GEO == "Yukon")
NWT <- Pit.df1 %>% subset(GEO == "Northwest Territories")
Nuna <- Pit.df1 %>% subset(GEO == "Nunavut")
Newf <- Pit.df1 %>% subset(GEO == "Newfoundland and Labrador")
PEI <- Pit.df1 %>% subset(GEO == "Prince Edward Island")
Nova <- Pit.df1 %>% subset(GEO == "Nova Scotia")
Newb <- Pit.df1 %>% subset(GEO == "New Brunswick")
Que <- Pit.df1 %>% subset(GEO == "Quebec")
Ont <- Pit.df1 %>% subset(GEO == "Ontario")
Mani <- Pit.df1 %>% subset(GEO == "Manitoba")
Sask <- Pit.df1 %>% subset(GEO == "Saskatchewan")
Alb <- Pit.df1 %>% subset(GEO == "Alberta")
BC <- Pit.df1 %>% subset(GEO == "British Columbia")

### combine rows of data from Province and Territorial regions
CanPT.df <- bind_rows(Yuk, NWT, Nuna, Newf, PEI, Nova, Newb, Que, Ont, Mani, Sask, Alb, BC)

### free up space
rm(Yuk, NWT, Nuna, Newf, PEI, Nova, Newb, Que, Ont, Mani, Sask, Alb, BC)

### Convert "Date" column to class **date**
CanPT.df <- CanPT.df %>% mutate(REF_DATE = lubridate::ymd(REF_DATE, truncated = 2L))

### Change Column Names using **rename** function of "dplyr" package
NO.Col3 <- c(Date = "REF_DATE", Population = "Target population", Type = "Type of shelter", Stat = "Statistics")
CanPT.df <- rename(CanPT.df, all_of(NO.Col3))

### Select "Totals target population" rows to graph
CanPT.pit <- subset(CanPT.df, Population == "Total, target population")

CanPT.plot <- ggplot(CanPT.pit) +
  aes(x = Date,
      fill = Stat,
      weight = VALUE) +
  geom_bar(position = "dodge") +
  scale_fill_manual(values = c(`Number of beds` = "darkblue",
                               `Number of shelters` = "skyblue")) +
  labs(x = "Date", y = "# Beds and Shelters") +
  theme_bw() +
  theme(axis.title.y = element_text(size = 12L, face = "bold"),
        axis.title.x = element_text(size = 12L, face = "bold"),
        plot.background = element_rect(fill = "white"),
        panel.grid.minor = element_blank(),
        legend.position = "none") +
  facet_wrap(
    vars(GEO),
    scales = "free_y",
    ncol = 3L,
    nrow = 5L
  )

ggsave("CanPT.plot.png", width = 9, height = 7)

### Create Interactive Plot with "ggplotly" package
CanPT.plotly <- ggplotly(CanPT.plot)
CanPT.plotly <- CanPT.plotly %>% toWebGL()
CanPT.plotly

```

</div>
<br>
**Figure 2: Provincial and Territorial Homeless Shelter Capacity PiT Count Data.** The graph shows total number of shelters and shelter beds for each province and territory over a seven year period (2016 - 2022). These counts were carried out on a single day (i.e. "*Point-in-Time*" or **PiT**) and thus only provide a brief glimpse of the homeless situations within each of the communities that took part in this census. Overall there were 72 communities and regions that participated in the last three annual **PiT** counts, and only 67 municipalities that took part in all seven **PiT** counts. These enumerations were based on three so called "*core*" locations: **(i)** **Unsheltered locations** (i.e. streets, alleys, parks, transit stations, abandoned buildings, encampments, vehicles, ravines, and other outdoor locations), **(ii)** **Sheltered locations** (i.e. emergency shelters, extreme weather shelters, Domestic Violence shelters, hotel/motel shelter spaces), and **(iii)** **Transitional housing** (i.e. longer-term housing spaces that help individuals transition to more secure housing). Counts based on the latter two locations were supplied by shelter service administrators, while counts carried out in **unsheltered locations** were generated by <u>survey</u>. Counts generated by <u>survey</u> also included: **(i)** individuals who were observed to be experiencing homelessness outside, but were unable to complete the survey; **(ii)** people within health and correctional facilities; and **(iii)** people who staid with other people due to the lack of a permanent residence (e.g. "*couch surfacing*").**<sup>1,3</sup>**

<br>
<br>

<div align=center>
**Figure 3: Homeless Shelter Capacity - Infrastructure Canada**<br>
**(Point-in-Time Census Data: 2016 - 2022)**<br>

```{r echo=FALSE, message=FALSE, warning=FALSE, fig.height=6, fig.width=7, fig.align='center'}
### Convert to class date
Pit.df2.ca <- Pit.df2.ca %>% mutate(Date = lubridate::ymd(Date, truncated = 2L))

### Graph Pit df
PitPlot <- ggplot(Pit.df2.ca) +
  aes(x = Date,
      group = Statistics,
      weight = VALUE) +
  geom_bar(position = "dodge", aes(fill=Statistics)) +
  scale_fill_manual(values = c("darkblue", "skyblue")) +
  labs(x = "Date",
       y = "# Beds and Shelters") +
  theme_bw() +
  theme(axis.title.y = element_text(size = 12L, face = "bold"),
        axis.title.x = element_text(size = 12L, face = "bold"),
        plot.background = element_rect(fill = "white"),
        panel.grid.minor = element_blank(),
        legend.position = "none") +
  facet_wrap(vars(Stype),
             scales = "free_y",
             ncol = 3L, nrow = 1L)

### Create Interactive Plot with "ggplotly" package
PitPlotly <- ggplotly(PitPlot)
PitPlotly <- PitPlotly %>% toWebGL()
PitPlotly

```

</div>
**Figure 3: National Homeless Shelter Capacity PiT Data (2016 - 2022).** The graph shows the overall national "*Point-in-Time*" (**PiT**) census of **(i)** Domestic violence, **(ii)** Emergency, and **(iii)** Transitional homeless shelters across Canada for the indicated time period. The latest counts (2022) show that there were a total of 39,713 shelter beds provided by 1,725 shelter service providers in 72 communities and regions from across Canada. Three different types of shelters make up these totals, including: **(i)** 518 **Emergency Shelters** that account for 18,467 beds; **(ii)** 602 **Transitional Housing** spaces that account for 11,935 beds; and **(iii)** 605 **Domestic Violence Shelters** that account for 9,311 beds.**<sup>1,3</sup>** 

<br>
<br>

### GTA Shelter System - Population in Crisis

<br>

**Homelessness**, as defined by **C**anadian **O**bservatory on **H**omelessness (**COH**, formerly the Canadian Homelessness Research Network):<br>

>"*describes the situation of an individual, family or community without stable, permanent, appropriate housing, or the immediate prospect, means and ability of acquiring it. It is the result of systemic or societal barriers, a lack of affordable and appropriate housing, the individual/household’s financial, mental, cognitive, behavioural or physical challenges, and/or racism and discrimination*."**<sup>4</sup>**

The negative social and economic consequences of **homelessness** in Canada are enormous. Homelessness has in fact flourished in past few decades, largely because of a lack of government leadership. The current shelter strategy that "*warehouses*" the poor, keeping them "*out-of-sight*" and "*out-of-mind*", has failed miserably. These types of "*band-aide*" solutions simply do not address the root causes of homelessness. 

>"*In some ways, it is simple: Canada can choose to invest an average of $2 billion annually to save $4 billion, and bolster urban economies, keep hundreds of thousands of Canadians healthy and productive as well as ensure productive futures. Or we can simply continue with the <u>status quo</u> and hope that things correct themselves, although after nearly 15 years since the original 1993 federal retreat from housing, Canada has succeeded mainly in increasing homelessness*."**<sup>5</sup>**

In fact, the current <u>status quo</u> is "*actually really expensive*".**<sup>6</sup>** It is far cheaper and more cost effective to provide homeless people with real housing, as apposed to "*band-aide*" solutions like shelters, hostels, warming centres and other like-minded temporary emergency services. Current evidence based research clearly "*points to the fact that if we do things differently, we not only achieve better social outcomes, but we also save money*."**<sup>6</sup>** Homelessness is estimated to cost the Canadian economy **<a class="one" href="https://www.homelesshub.ca/about-homelessness/homelessness-101/cost-analysis-homelessness">7.05 billion dollars</a>** on an annual basis. 

The chronic lack of safe and affordable housing, along with the growing economic divide between rich and poor, needs to be addressed by all levels of governments. The current scatter-shot approach to mitigating or eliminating homelessness and poverty, which are inextricably linked, has produced little in the way of real positive social/economic change. 

>"*Not repeating past mistakes should at least be a first line of defence...*[such as]*curtailed social assistance...punitively low minimum wage rates...tax incentives that ignore renters and those on social assistance...cutbacks to social services and health*."**<sup>5</sup>**

<br>

<b>About Toronto's Shelter System:</b>
<br>
Information in this report is based on a number of Shelter and Homelessness records that are freely available for download from the City of Toronto's **<a class="one" href="https://open.toronto.ca/">Open Data Portal</a>**. The following is a brief overview of the main datasets analyzed by our group, the **<a class="one" href="https://www.unhousedliberation.ca/">Voices 4 Unhoused Liberation</a>**.<br>
**(i) <a class="one" href="https://open.toronto.ca/dataset/central-intake-calls/">Central Intake</a>** (**CI**)**<sup>7</sup>** is the entry point for persons in need of emergency shelter services. People able to access **CI**'s 24/7 telephone line (416-338-4766 or 1-877-338-3398) can potentially receive a <u>referral</u> to an emergency shelter or other overnight accommodations. This dataset contains records of calls received by **CI**, and the outcomes of those calls (e.g. # unique individuals who contact **CI**, but were not matched to a shelter space each day). All of this information is collected by the city of Toronto's **S**helter **M**anagement **I**nformation **S**ystem (**SMIS**). Callers not matched to an available space that <u>suits their needs</u> remain in the queue until they can be provided a referral, or until the closeout process at the end of the night at 4:00 AM. These daily call counts and <u>outcomes</u> (i.e. **SMIS** assigns codes for various outcomes) are collected and reported on a monthly basis (i.e. monthly updates are published on the 15<sup>th</sup> day of the following month). **CI** uses 13 distinct <u>wrap-up codes</u> to classify the daily calls they receive. Unfortunately, these codes only provide information about the volume and types of calls, and do not contain information about the outcomes of said referrals.
<br>
**(ii)** **<a class="one" href="https://open.toronto.ca/dataset/toronto-shelter-system-flow/">Toronto Shelter System Flow</a>** (**TSSF**)**<sup>8</sup>** data is compiled on a monthly basis by the city of Toronto's **S**helter **M**anagement **I**nformation **S**ystem (**SMIS**). These records show the number of people entering (intake) or leaving (outtake) the shelter system. Some of the terms used in these records are listed in **Table 1**. Unfortunately, the current **SMIS** data is limited since it does not include any information about homeless people sleeping outdoors, or homeless people who do not use city funded services that are apart of **SMIS**. Although it is difficult to assess the exact number of homelessness people within the city, the most recent **<a class="one" href="https://open.toronto.ca/dataset/2021-street-needs-assessment-results/">Street Needs Assessment (2021)</a>** suggests that ~18% of city's homeless population are not included in the current data. This is likely an under estimate of its "*true*" size given the severity of the current housing and homelessness problems within the region.**<sup>8</sup>**
<br>
**(iii) <a class="one" href="https://open.toronto.ca/dataset/daily-shelter-overnight-service-occupancy-capacity/">Daily Shelter Overnight Service Occupancy</a>** (**DSOSO**)**<sup>9</sup>** records maintained by **SMIS** is compiled on a daily basis. It records the number of people who use overnight shelters and allied services within the **GTA**. The data includes the identify of program operators, as well as the locations and nature of the services they provide.**<sup>6</sup>**<br>
&nbsp; &nbsp; Unfortunately there is little information about the amount of funding the city receives and allocates for these different homeless programs and services. The **DSOSO** dataset only mentions **Funding Capacity** within the context of the "*number of beds or rooms that a program is intended* [funded] *to provide*".**<sup>9</sup>** Although there may be a number of reasons why beds or rooms may be temporarily out of service (e.g. repairs, renovations, outbreaks, or pest control) they are not reported. These records also mention **Actual Capacity**, which refers to the "*number of beds or rooms in service and showing as <u>available for occupancy</u> in the SMIS at time of reporting.*" This latter measure is touted as being "*a more effective capacity measure to assess program occupancy rates*". However, the number of <u>unavailable</u> rooms or beds (**Note:** **# UNAVAILABLE BEDS** = **Capacity Funding Bed** - **Capacity Actual Bed**) is arguable a more reliable measure of the number of rooms/beds the currently funded system can and should provide and fill on a daily basis. Unfortunately there appears to be very little oversight of service providers with regards to reducing or eliminating bed/room "*unavailability*", and the draconian nature of service restrictions they impose on their clients. 

<br>

<div align=center>
<!----------------------------------------------------------------->
<!---------- TABLE 1 - CENTRAL INTAKE CALL CENTRE TERMS ----------->
<!----------------------------------------------------------------->
<a id="Tab1"> </a>
<table class="Table">
    <thead>
      <tr>
        <td colspan="4"><span id="BBlk20">TABLE 1. CENTRAL INTAKE CALL CENTRE FEATURES</span></td>
      </tr>
    <thead>
    <thead>
      <tr>
        <th class="f18" colspan="1"><span id="Blk">Term</span><sup>7</sup></th>
        <th class="f18" colspan="3"><span id="Blk">Definition</span><sup>7</sup></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="text-align:center"><span id="Blk">Date</span></td>
        <td style="text-align:left">Data recorded up until "close-out", which is completed at 4:00 AM, is included in the daily reports (i.e. Jan 2<sup>nd</sup> 4 AM data would be included as part of Jan 1<sup>st</sup> operational record).</td>
      </tr>
      <tr>
        <td style="text-align:center"><span id="Blk">Unmatched Callers</span></td>
        <td style="text-align:left">Total individuals who were <u>not</u> able to be offered a space over the past 24 hours, at time of closeout at 4:00 AM.</td>
      </tr>
      <tr>
        <td style="text-align:center"><span id="Blk">Single Call</span></td>
        <td style="text-align:left">Number of <u>unmatched callers</u> who had called Central Intake a single time on this date.</td>
      </tr>
      <tr>
        <td style="text-align:center"><span id="Blk">Repeat Caller</span></td>
        <td style="text-align:left">Number of <u>unmatched callers</u> who had called Central Intake two or more times on this date.</td>
      </tr>
    </tbody>
</table>

<!--------------------------------------------------------->
<!--------------------------------------------------------->
</div>

<br>
<br>

<div align=center>
<!-------------------------------------------------------------->
<!---------- TABLE 2 - TSSF DATASET CATEGORIES/TERMS ----------->
<!-------------------------------------------------------------->
<a id="Tab2"> </a>
<table class="Table">
    <thead>
      <tr>
        <td colspan="4"><span id="BBlk20">TABLE 2. TSSF DATA FEATURES</span></td>
      </tr>
    <thead>
    <thead>
      <tr>
        <th class="f18" colspan="1"><span id="Blk">Term</span><sup>8</sup></th>
        <th class="f18" colspan="3"><span id="Blk">Definition</span><sup>8</sup></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="text-align:center"><span id="Blk">Chronic homelessness</span></td>
        <td style="text-align:left">These are people who meet one of the two following criteria, as per the federal definition of chronic homelessness. The person has recorded a minimum of 180 overnight stay in the past year (365 days); or the person has recurrent overnight stays over the past three years with a cumulative duration of at least 546 nights.</td>
      </tr>
      <tr>
        <td style="text-align:center"><span id="Blk">Youth</span></td>
        <td style="text-align:left">These are unaccompanied youth who are between the ages of 16 and 24 by the last date of the reporting month. They are not members of a "<b>family</b>", which is another term use in these records that refers to individuals who stay in a family designated overnight service.</td>
      </tr>
      <tr>
        <td style="text-align:center"><span id="Blk">Single Adult</span></td>
        <td style="text-align:left">An individual who is classified as <u>neither</u> a <b>youth</b>, nor a member of a </b>family</b></td>
      </tr>
      <tr>
        <td style="text-align:center"><span id="Blk">Refugees</span></td>
        <td style="text-align:left">People who identify either as a "refugee" upon intake to the shelter system, or who enter the system via a designated refugee shelter program. It applies to all household members as answered by the head of the household.</td>
      </tr>
      <tr>
        <td style="text-align:center"><span id="Blk">Indigenous</span></td>
        <td style="text-align:left">An individual who self-identifies as First Nations (status, non-status, treaty, non-treaty), Metis or Inuit in at least one of the intakes completed in <b>SMIS</b>.</td>
      </tr>
      <tr>
        <td style="text-align:center"><span id="Blk">All Populations</span></td>
        <td style="text-align:left">This refers to the total number of individuals represented in the report without any demographic breakdown.</td>
      </tr>
    </tbody>
</table>

<!--------------------------------------------------------->
<!--------------------------------------------------------->
</div>

<br>
<br>

<div align=center>
<!--------------------------------------------------------->
<!---------- TABLE 3 - DSSO DATASET CATEGORIES/TERMS ----------->
<!--------------------------------------------------------->
<a id="Tab3"> </a>
<table class="Table">
    <thead>
      <tr>
        <td colspan="4"><span id="BBlk20">TABLE 3. DSOSO DATASET CATEGORIES/TERMS</span></td>
      </tr>
    <thead>
    <thead>
      <tr>
        <th class="f18" colspan="1"><span id="Blk">Term</span><b><sup>9</sup></b></th>
        <th class="f18" colspan="3"><span id="Blk">Definition</span><b><sup>9</sup></b></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="text-align:center"><span id="Blk">OCCUPANCY DATE</span></td>
        <td style="text-align:left">This date refers to the <u>evening of the overnight period</u> being reported. The occupancy data is retrieved at 4:00 AM the <u>following morning</u> (e.g. Jan. 1<sup>st</sup>, 2024 record => data collected at 4:00 AM Jan. 2<sup>nd</sup>, 2024).</td>
      </tr>
      <tr>
        <td style="text-align:center"><span id="Blk">SERVICE USER COUNT</span></td>
        <td style="text-align:left">The number of service users staying in an overnight program as of the occupancy time and date. Programs with no service user occupancy will not be included in reporting for that day.</td>
      </tr>
      <tr>
      <tr>
        <td style="text-align:center"><span id="Blk">PROGRAM ID</span></td>
        <td style="text-align:left">Provides a distinct or <b>unique ID</b> of the program even if the program name changes.</td>
      </tr>
      <tr>
        <td style="text-align:center"><span id="Blk">SECTOR</span></td>
        <td style="text-align:left">A category or type of homeless shelter that is based on gender, age and household size of the service user group(s) being served at the shelter site. There are <u>currently</u> 5 shelter sectors in Toronto: <b>(i)</b> adult men, <b>(ii)</b> adult women, <b>(iii)</b> mixed adult (co-ed or all gender), <b>(iv)</b> youth, and <b>(v)</b> family.</td>
      </tr>
      <tr>
        <td style="text-align:center"><span id="Blk">PROGRAM MODEL</span></td>
        <td style="text-align:left">Basic classification scheme that divides the shelter program into two groups: <b>(i) Emergency</b> or <b>(ii) Transitional</b>. The <b>Emergency</b> program can be accessed by any individual or family experiencing homelessness with or without a referral, while the <b>Transitional</b> program provides required and/or specialized programming that can be accessed by eligible individuals and families experiencing homelessness by referral only.</td>
      </tr>
      <tr>
        <td style="text-align:center"><span id="Blk">OVERNIGHT SERVICE TYPE</span></td>
        <td style="text-align:left"> The types of overnight service being provided include: <b>(i) Shelter</b>, <b>(ii) 24-Hour Respite</b>, <b>(iii) Motel/Hotel</b>, <b>(iv) Interim Housing</b>, <b>(v) Warming Centre</b>, <b>(vi) 24-Hour Women's Drop-in</b>, and <b>(vi) Isolation/Recovery Site</b>.<br>
<b>Shelter:</b> Supervised residential facilities that provide temporary accommodation and related support services to assist people experiencing homelessness to move into housing. Operate year-round. <b>24-Hour Respite:</b> An allied shelter service which provides essential services to individuals experiencing homelessness in an environment that prioritizes ease of access to safe indoor space. Services provided include resting spaces, meals and service referrals. Operates on a 24/7 basis. <b>Motel/Hotel:</b> A type of shelter program that provides shelter beds/rooms through contracts with hotel and motel operators, which enables the City to expand and contract emergency shelter capacity in response to demand for services. <b>Interim Housing:</b> A type of shelter program that provides interim housing shelter beds through contracts with apartment spaces. <b>Warming Centre:</b> An allied shelter service that provides immediate safe indoor space for people during extreme cold weather alerts. Facilities vary, but often include City of Toronto buildings or community recreation centres. Services vary, depending on the facility, and may include at a minimum resting spaces, snacks and referrals to emergency shelter. Operates on a 24/7 basis for the duration of an extreme cold weather alert. <b>24-Hour Women's Drop-in:</b> A type of 24-Hour Respite Site that provides services to women and transgender or gender-non-binary people who are experiencing homelessness. <b>Isolation/Recovery Site:</b> Dedicated isolation and recovery programs with medical supports for people experiencing homelessness to isolate and recover from COVID-19.</td>
      </tr>
      <tr>
      <td style="text-align:center"><span id="Blk">PROGRAM AREA</span></td>
      <td style="text-align:left">Identifies either <b>Base Shelter and Overnight Services</b> system programs, or <b>Temporary Response</b> system programs. <b>(i) Base Shelter and Overnight Services System:</b> are intended to be regular, year-round programs. <b>(ii) Base Program - Refugee:</b> are intended to be year-round programs that serve refugee and asylum claimant families and individuals. <b>(iii) Temporary Refugee Response:</b> are intended to create spaces in the overnight services system in order to support refugee and asylum claimant families and individuals. <b>(iv) COVID-19 Response:</b> Programs that are intended to create spaces in the overnight services system in order to support improved physical distancing during the COVID-19 pandemic. <b>(v) Winter Response:</b> are intended to be exclusively dedicated to the provision of additional spaces under winter services plans. Winter service planning may also add additional capacity to existing programs classified in other program areas.</td>
      </tr>
      <tr>
      <td style="text-align:center"><span id="Blk">CAPACITY TYPE</span></td>
      <td style="text-align:left">Program provides either <b>room</b> or <b>bed</b> based capacity. <b>(i) Bed Based Capacity:</b> where occupancy is measured at the bed level and typically involve common sleeping areas. <b>(ii)Room Based Capacity:</b> where occupancy is measured at the room level and is typically of family programs or hotel-based programs where sleeping rooms are not shared by people from different households.</td>
      </tr>
      <tr>
      <td style="text-align:center"><span id="Blk">CAPACITY ACTUAL (BED/ROOM)</span></td>
      <td style="text-align:left">The number of <b>beds</b> or <b>rooms</b> showing as available for occupancy in the Shelter Management Information System (<b>SMIS</b>).</td>
      </tr>
      <tr>
      <td style="text-align:center"><span id="Blk">CAPACITY FUNDING (BED/ROOM) </span></td>
      <td style="text-align:left">The number of <b>rooms</b> or <b>beds</b> that a program has been approved to provide.</td>
      </tr>
      <tr>
      <td style="text-align:center"><span id="Blk">UNAVAILABLE ROOMS/BEDS</span></td>
      <td style="text-align:left">The number of <b>beds</b> or <b>rooms</b> that are <u>not currently available</u> in a program. This can include temporarily out-of-service beds due to maintenance, repairs, renovations, outbreaks and pest control (<b>**NOTE:</b> UNAVAILABLE = CAPACITY FUNDING - CAPACITY ACTUAL).</td>
      </tr>
    </tbody>
</table>

<!--------------------------------------------------------->
<!--------------------------------------------------------->
</div>

<br>
<br>


### Toronto Central Intake Call Data

```{r include=FALSE}
### import Central Intake Call dataset
CICdf1 <- import(here("Datasets", "Central Intake Call Wrap-Up Codes Data.csv"))
CICdf2 <- import(here("Datasets", "Central Intake Service Queue Data.csv"))

```


<div align=center>
**Figure 4: Toronto Central Intake Centre (CIC)**<br>
**(Current Data: 2020/11/03 - 2024/03/31)**<br>

```{r echo=FALSE, message=FALSE, warning=FALSE, fig.height=7, fig.width=8, fig.align='center'}
### Plot Central Intake Call Information
CIC1plot <- ggplot(CICdf1) +
  aes(x = Date,
      y = `Total calls coded`,
      colour = `Code 1A - Referral to a Sleeping/Resting Space`) +
  geom_line(linewidth = 1) +
  scale_color_viridis_c(option = "inferno", direction = -1) +
  labs(x = "Date",
       y = "Total # Calls (coded)",
       color = "Total # Referrals \n (Sleeping/Resting Spaces)") +
  theme_bw() +
  theme(axis.title.y = element_text(size = 11L, face = "bold"),
        axis.title.x = element_text(size = 11L, face = "bold"),
        plot.background = element_rect(fill = "white"),
        panel.grid.minor = element_blank(),
        legend.justification = c(1,0),
        legend.position = c(0.355,0.53))

CIC1plot

```

</div>
**Figure 4. Toronto Central Intake Daily Call Totals.** The plotted data, which was taken from the "*Central Intake Call Wrap-Up Codes*" dataset, provides daily counts of calls answered by **Central Intake Centre** (**CIC**). The calls are classified by a caseworker using 13 distinct "*wrap-up*" codes (i.e. describes general nature of the call). These daily **SMIS** records are manually updated on a monthly basis. Although the "*wrap-up*" codes provide information related to the volume and type of calls received, it does not track requests made by unique individuals, nor the ultimate outcomes of referrals.**<sup>7</sup>** Looking at the plotted data it is evident that there has been an overall increase in the number of calls to **CIC**. Unfortunately it appears that few callers were able to successfully obtain a referral for an overnight sleeping or resting space (colour coded). This low success rate has been particularly pronounced within the last 10 months.

<br>
<br>

<div align=center>
**Figure 5: Toronto Central Intake Centre (CIC)**<br>
**(Current Data: 2020/10/30 - 2024/03/31)**<br>

```{r echo=FALSE, message=FALSE, warning=FALSE, fig.height=7, fig.width=8, fig.align='center'}
### Plot Central Intake Call Information
CIC2plot <- ggplot(CICdf2) +
  aes(x = Date,
      y = `Unmatched callers`,
      colour = `Repeat caller`) +
  geom_line(linewidth = 1) +
  scale_color_viridis_c(option = "inferno", direction = -1) +
  labs(x = "Date",
       y = "# Unmatched Callers (no shelter provided)",
       colour = "# Repeat Callers") +
  theme_bw() +
  theme(axis.title.y = element_text(size = 11L, face = "bold"),
        axis.title.x = element_text(size = 11L, face = "bold"),
        plot.background = element_rect(fill = "white"),
        panel.grid.minor = element_blank(),
        legend.justification = c(1,0),
        legend.position = c(0.255,0.55))

CIC2plot

```

</div>
**Figure 5. Toronto Central Intake Total Numbers of Daily Unmatched Callers.** The plotted data, taken from the monthly updated "*Central Intake Service Queue*" dataset, provides daily counts of unique individuals who contacted the **CIC** to access an emergency shelter, but were <u>not matched</u> to a shelter space. The **SMIS** <u>service queue</u> caller data details when a bed was requested for a caller seeking a shelter space. An <u>unmatched</u> caller (i.e. person not given a referral to an available space that suits their needs at the time of their call) <u>remains in the queue</u> until either they were are provided a referral, or until "*close-out*" (i.e. 4:00 AM, end of the night). The data only contains three features, namely: (i) date of the call, (ii) total number of **Unmatched Callers**, and (iii) whether the caller phoned once (i.e. **Single Caller**) or multiple times (i.e. **Repeat Caller**).**<sup>7</sup>** Looking at the plotted data it is evident that there has been a steady increase in the number of callers <u>not</u> receiving a referral to an overnight sleeping space or safe shelter despite repeated calls.

<br>
<br>

### Toronto Shelter System Flow (TSSF) Data

```{r include=FALSE}
### Import data file
Demodf <- import(here("Datasets", "toronto-shelter-system-flow.csv"))

### Change Column Names using **rename** function of "dplyr" package
lookup <- c(ID = "_id", Date = "date(mmm-yy)", ageLT16 = "ageunder16", age16to24 = "age16-24", age25to44 = "age25-44", age45to64 = "age45-64", ageGT65 = "age65over", Male = "gender_male", Female = "gender_female", TrGNBTS = "gender_transgender,non-binary_or_two_spirit")

Demodf <- rename(Demodf, all_of(lookup))

# Convert to class date
Demodf2 <- Demodf %>% mutate(Date = lubridate::my(Date))

### Remove '%' sign in column "population_group_percentage"
Demodf2$population_group_percentage <- gsub("%", "", as.character(Demodf2$population_group_percentage))

### Now Change this **character** "class" of column values
### to **numeric** "class" 
Demodf2$population_group_percentage <- as.numeric(Demodf2$population_group_percentage)

### Apply **rowSums** function to select column values
### Add new column/variable named "row_sum" 
Demodf2$row_sum <- rowSums(Demodf2[ , c(10:14)], na.rm=TRUE)

### ****NOTE**** "row_sums" totals = "actively_homeless" column values

### Use "subset" function to select only "All Population" rows
Demodf3 <- subset(Demodf2, population_group == "All Population")

### Remove "All Population" rows
Demodf4 <- Demodf2 %>%  filter(population_group != 'All Population')

rm(Demodf)

```

<br>

<div align=center>
**Figure 6: Toronto Shelter System Flow (TSSF)**<br>
**(SMIS dataset: 2018/01 - 2024/03)**<br>

```{r echo=FALSE, fig.height=7, fig.width=8, fig.align='center'}
### Bar Graph 3
plotDemodf3 <- ggplot(Demodf3) +
  aes(x = Date,
      y = actively_homeless) +
  geom_line(aes(linewidth = row_sum), color = "darkblue", lineend = "round") +
  labs(x = "Date",
       y = "Total Homeless Population (SMIS #)",
       linewidth = "Total #",
       caption = "Current: Feb 2024") +
 theme_bw() +
 theme(plot.caption = element_text(hjust = 0),
       axis.title.y = element_text(size = 12L,
                                   face = "bold"),
       axis.title.x = element_text(size = 12L, face = "bold"))

plotDemodf3

```

</div>
**Figure 6. Toronto Shelter System Flow Data Total Numbers.** This plot shows the total number of "*actively*" homeless people according to **SMIS** records. The **TSSF** data is only updated on a monthly basis (e.g. recent March 2024 data was updated on April 15<sup>th</sup>). The data is only based on those people who have used overnight services that are monitored by **SMIS** (i.e. excludes people who sleep outdoors or who use non-**SMIS** homeless services). The changing width of the plotted line reflects the changing dynamics of the homeless population over this 6 year period. Clearly the number of homeless people remains high within the **GTA**. The recent all time high of 11,173 "actively" homeless people for Feb/2024 is currently ebbing somewhat (10,833 Mar/2024). This is perhaps due to the warmer weather as many homeless people often escape the shelter system for safer environs. Although far from complete the **TSSF** records appear (for some unknown reason) to be more extensive than the **DSOSO** records since the latter dataset reports fewer homeless people (i.e. 9,748 for Mar 1<sup>st</sup>, 9,653 for Mar 15<sup>th</sup>, and 9,687 for Mar 31<sup>st</sup> 2024). This discrepancy in the number of homeless people is a bit disconcerting given that both datasets are reportedly based on the same **SMIS** records.

<br>

```{r include=FALSE}
### Use "subset" function to select only "All Population" rows
### for last monthly reporting period (i.e. March data ==> reported on Apr15th)
Demodf4Mar <- subset(Demodf4, Date == "2024-03-01")
Demodf4MarChr <- subset(Demodf4Mar, population_group == "Chronic")
myAges <- select(Demodf4Mar, 3,10:14)

### Apply **rowSums** function to select column values
### Add new column/variable named "row_sum" 
myAges$row_sum <- rowSums(myAges[ , c(2:6)], na.rm=TRUE)

### Pivot-long ==> move columns to rows and rename columns 
mydf <- select(Demodf4MarChr, 10:14)
mydf2 <- mydf %>% pivot_longer(cols = starts_with("age"),
                               names_to = "AgeGr",
                               values_to = "counts")

### add new column for calculated percentages
mytab <- mydf2 %>% mutate(prop = 100*(counts/sum(counts)))
mytab2 <- mytab %>% kable()

Demodf4Groups <- select(Demodf4Mar, 1:3,9:14)
Demodf4Groups$GTEage25 <- rowSums(Demodf4Groups[ , c(7:9)], na.rm=TRUE)

```

<div align=center>
**Figure 7: Toronto Shelter System Flow (TSSF)**<br>
**(SMIS dataset: 2018/01 - 2024/03)**<br>

```{r echo=FALSE, fig.height=7, fig.width=8, fig.align='center'}
### Graph 4 - Demographics of Homeless Population in GTA
DemoPlot4 <- ggplot(Demodf4) +
  aes(x = Date,
      y = actively_homeless,
      colour = population_group,
      group = population_group) +
  geom_line(aes(linewidth = population_group_percentage), lineend = "round") +
  scale_color_manual(values = c(Chronic = "gold",
                                Families = "khaki4",
                                Indigenous = "royalblue",
                                `Non-refugees` = "red2",
                                Refugees = "red4",
                                `Single Adult` = "black",
                                Youth = "orchid")) +
  labs(x = "Date",
       y = "Homeless Population (SMIS #)",
       caption = "Current: Feb 2024",
       color = "Population Group",
       linewidth = "Population Group %") +
  theme_bw() +
  theme(plot.caption = element_text(hjust = 0),
        axis.title.y = element_text(size = 12L, face = "bold"),
        axis.title.x = element_text(size = 12L, face = "bold"),
        plot.background = element_rect(fill = "white"),
        panel.grid.minor = element_blank())

DemoPlot4

```

</div>
**Figure 7. Demographics of TSSF dataset.** The above plot shows the number of "*actively*" homeless people classified as either **(i)** Chronically homeless, **(ii)** a member of a homeless Family, **(iii)** Indigenous, **(iv)** a non-refugee, **(v)** a refugee, **(vi)** a single adult (> 24 yrs), or a **(vii)** Youth (16-24 yrs) who is not a member of an homeless family. Like **Figure 6**, the changing width of the plotted line reflects the changing dynamics of each homeless group. Currently (Mar 2024) the largest homeless demographic group is single adults (Note: 7266 single adults, or 67.1%, compared to 2555 family members, or 23.6%, and 1012 youths, or 9.3%). Adults (> 24 yrs) also make up ~77% (4835/6288) of the chronic homeless population. The homeless refugee population (5805, or 53.6%) slightly out numbers the homeless non-refugee population (5028, or 46.4%).

<br>

```{r include=FALSE}
### ***********************************************************
### ********************** CITY VARIABLE **********************
### ***********************************************************

### Import data file
DSOSOdt <- import(here("Datasets", "DSOSO_21Apr2024.csv"))

### Change **class** of column values from *numeric* to *character* 
### Namely: ORG_ID, SHELTER_ID, LOCATION_ID, PROGRAM_ID
### since can't change *numeric* => *factor* class
### also allows for proper graphing of data
DSOSOdt$ORG_ID <- as.character(DSOSOdt$ORG_ID)
DSOSOdt$SHELTER_ID <- as.character(DSOSOdt$SHELTER_ID)
DSOSOdt$LOCATION_ID <- as.character(DSOSOdt$LOCATION_ID)
DSOSOdt$PROGRAM_ID <- as.character(DSOSOdt$PROGRAM_ID)

### For *character* columns only, replace any blank strings with "NA" values.
### Create **data frame** (df) tabulating the missing "NA" column values
### NOTE: converted empty (" ") values to "NA" since **colSum** function
### doesn't work with empty values
# df <- DSOSOdt %>% mutate(across(where(is.character), ~ na_if(.,"")))
# df.NA.tab <- data.frame(colname = names(df), colSums_DSOSOdt=colSums(is.na(df)))

### Replace empty (" ") column values in df "DSOSOdt"
### with another unique column value within the same row.
### Again this will serve as an unique place holder to be
### swapped out next. Define "swap" conditions using **dplyr** package
df1 <- DSOSOdt %>% mutate(CITY = ifelse(CITY == "", PROGRAM_ID, CITY))

### Replace unique place holder ID with City name
df1['CITY'][df1['CITY'] == "16058"] <- "Etobicoke"
df1['CITY'][df1['CITY'] == "15391"] <- "Etobicoke"
df1['CITY'][df1['CITY'] == "15751"] <- "Toronto"
df1['CITY'][df1['CITY'] == "12256"] <- "Toronto"
df1['CITY'][df1['CITY'] == "12051"] <- "Toronto"
df1['CITY'][df1['CITY'] == "17111"] <- "Scarborough"
df1['CITY'][df1['CITY'] == "16252"] <- "Toronto"
df1['CITY'][df1['CITY'] == "16251"] <- "Toronto"
df1['CITY'][df1['CITY'] == "16551"] <- "Etobicoke"
df1['CITY'][df1['CITY'] == "16291"] <- "Etobicoke"
df1['CITY'][df1['CITY'] == "16351"] <- "Toronto"
df1['CITY'][df1['CITY'] == "16331"] <- "Toronto"
df1['CITY'][df1['CITY'] == "16471"] <- "Scarborough"
df1['CITY'][df1['CITY'] == "11891"] <- "Toronto"
df1['CITY'][df1['CITY'] == "17394"] <- "Toronto"
df1['CITY'][df1['CITY'] == "17911"] <- "Toronto"
df1['CITY'][df1['CITY'] == "16533"] <- "North York"
df1['CITY'][df1['CITY'] == "16535"] <- "North York"

### For character columns only, replace any blank strings with NA values
df1.NA <- df1 %>% mutate(across(where(is.character), ~ na_if(.,"")))

### Create another data frame tabulating missing "NA" values for each column
### NOTE: convert empty ("") values to "NA" since **colSum** function doesn't
### work with empty values
#df1.NA.tab <- data.frame(colname = names(df1.NA), colSums_df1NA=colSums(is.na(df1.NA)))

### ***********************************************************
### ****************** POSTAL CODE VARIABLE *******************
### ***********************************************************

### Replace missing POSTAL CODES values
### Swap empty " " column values with unique place holder value
### Set conditions for "swap" using **dplyr** package
df2 <- df1 %>% mutate(POSTALcode = ifelse(POSTALcode == "", PROGRAM_ID, POSTALcode))

### Replace unique place holder ID with Postal code
df2['POSTALcode'][df2['POSTALcode'] == "15751"] <- "M5A 2N2"
df2['POSTALcode'][df2['POSTALcode'] == "12256"] <- "M6H 1B1"
df2['POSTALcode'][df2['POSTALcode'] == "12051"] <- "M4M 1J8"
df2['POSTALcode'][df2['POSTALcode'] == "17111"] <- "M1K 1M2"
df2['POSTALcode'][df2['POSTALcode'] == "16252"] <- "M5A 1V1"
df2['POSTALcode'][df2['POSTALcode'] == "16251"] <- "M5A 1V1"
df2['POSTALcode'][df2['POSTALcode'] == "16351"] <- "M4X 1L3"
df2['POSTALcode'][df2['POSTALcode'] == "16331"] <- "M5V 1A3"
df2['POSTALcode'][df2['POSTALcode'] == "16471"] <- "M1H 3B7"
df2['POSTALcode'][df2['POSTALcode'] == "16533"] <- "M2J 4R1"
df2['POSTALcode'][df2['POSTALcode'] == "16535"] <- "M2J 4R1"
df2['POSTALcode'][df2['POSTALcode'] == "11891"] <- "M5S 2H1"

### Free up file space within working "Environment"
rm(df1)

### For character columns only, replace any blank strings with NA values
df2.NA <- df2 %>% mutate(across(where(is.character), ~ na_if(.,"")))

### Create data frame of missing "NA" values for each column
### NOTE: converted empty (" ") values to "NA" since "colSum" doesn't
### work with empty values
#df2.NA.tab <- data.frame(colname = names(df2.NA), colSums_SVdt=colSums(is.na(df2.NA)))

### Unfortunately can't find 4 Postal Codes
### swap out place holder PID with "NA" value
df2.NA['POSTALcode'][df2.NA['POSTALcode'] == "16058"] <- ""
df2.NA['POSTALcode'][df2.NA['POSTALcode'] == "15391"] <- ""
df2.NA['POSTALcode'][df2.NA['POSTALcode'] == "16291"] <- ""
df2.NA['POSTALcode'][df2.NA['POSTALcode'] == "16551"] <- ""

### For character columns only, replace any "NA" string with NA values
df3.NA <- df2.NA %>% mutate(across(where(is.character), ~ na_if(.,"")))

### Create data frame of missing "NA" values for each column
### Check "NA" status of "POSTALcode" column of 2 Etobicoke shelters
#df3.NA.tab <- data.frame(colname = names(df3.NA), colSums_df3NA=colSums(is.na(df3.NA)))

### Free up file space within working "Environment"
rm(df1, df2, df2.NA)

```


<div align=center>
**Figure 8: GTA Shelter Population (DSOSO)**<br>
**(Period: 2021/01/01 - 2024/04/21)**<br>

```{r echo=FALSE, message=FALSE, warning=FALSE, fig.height=7, fig.width=8, fig.align='center'}
### ***********************************************************
### ********** GRAPH 5 - TOTAL #s vs TIME line graph **********
### ***********************************************************

### Use "group by" and "sum" functions to sum up observations
### Total Shelter Population TIMELINE
df3NAtotals <- df3.NA %>%
  group_by(OCCUPANCY_DATE) %>%
  summarise(n_observ = n(), sum_Users = sum(SERVICE_USER_COUNT))

###### Plot Total Shelter Resident Population TIMELINE
plot.ResSum <- ggplot(df3NAtotals) +
  aes(x = OCCUPANCY_DATE, y = sum_Users) +
  geom_line(colour = "darkblue") +
  labs(x = "Date",
       y = "Total Occupancy # (counts)") +
  theme_bw() +
  theme(plot.title = element_text(size = 14L,
                                  face = "bold", hjust = 0.5, vjust = 0),
        axis.title.y = element_text(size = 12L,
                                    face = "bold"),
        axis.title.x = element_text(size = 12L,
                                    face = "bold"),
        plot.background = element_rect(fill = "white"))

### Create Interactive Plot with "ggplotly" package
plotResSumly <- ggplotly(plot.ResSum)
plotResSumly <- plotResSumly %>% toWebGL()
plotResSumly

```

</div>
**Figure 8. Total Shelter Population within the Greater Toronto Area (GTA).** The above plot shows the total number of daily shelter users for the period spanning 2021-01-01 to 2024-04-21. The number of shelter occupants have increased by more than 63% during this time.

<br>
<br>

<div align=center>
**Figure 9: GTA Shelter Population (DSOSO)**<br>
**(Regional Numbers)**<br>

```{r echo=FALSE, message=FALSE, warning=FALSE, fig.height=8, out.width='100%', fig.align='center'}
### *************************************************************
### ********** GRAPH 6 - TOTAL # vs TIME (CITY FACETS) **********
### *************************************************************

### Use "group by" and "sum" functions to sum up observations
### Total Population per "CITY"
df3NAcity <- df3.NA %>%
  group_by(OCCUPANCY_DATE, CITY) %>%
  summarise(n_observ = n(), sum_Users = sum(SERVICE_USER_COUNT))

###### Plot Total Shelter Population per "CITY" Facets
plotCT <- df3NAcity %>% filter(!(CITY %in% "")) %>%
  ggplot() +
  aes(x = OCCUPANCY_DATE, y = sum_Users, group = CITY) +
  geom_line(colour = "darkblue") +
  labs(x = "Date",
       y = "Total Occupancy # (counts)") +
  theme_bw() +
  theme(plot.title = element_text(size = 14L,
                                  face = "bold", hjust = 0.5, vjust = 0),
        axis.title.y = element_text(size = 12L, face = "bold"),
        axis.title.x = element_text(size = 12L, face = "bold"),
        plot.background = element_rect(fill = "white"),
        panel.grid.minor = element_blank()) +
  facet_wrap(vars(CITY), scales = "free_y", ncol = 3L, nrow = 5L)

### Create Interactive Plot with "ggplotly" package
plotCTly <- ggplotly(plotCT)
plotCTly <- plotCTly %>% toWebGL()
plotCTly

```

</div>
**Figure 9. Shelter Population per GTA region.** The plot shows the total number of shelter users within different parts of the **GTA** (i.e. Toronto, North York, Etobicoke, Scarborough, Vaughan) for the past ~40 months (2021-01-01 to 2024-04-21). The data reveals that the vast majority of shelter users are currently being housed within Toronto and North York (see Bar graph in **Figure 10**).

<br>
<br>

<div align=center>
**Figure 10: GTA Shelter Population (DSOSO)**<br>
**(Regional Numbers: 2024-04-21)**<br>

```{r echo=FALSE, message=FALSE, warning=FALSE,}
### *********************************************************
### ********** GRAPH 7 - BAR GRAPH TOTAL # vs CITY **********
### *********************************************************

### Use "group by" and "sum" functions to sum up observations
### Total Population per "CITY"
df240421 <- subset(df3.NA, OCCUPANCY_DATE == "2024-04-21")
CityTots <- df240421 %>%
  group_by(OCCUPANCY_DATE, CITY) %>%
  summarise(n_observ = n(), sum_Users = sum(SERVICE_USER_COUNT))

### add new column for calculated percentages
CityTotsSum <- CityTots %>% mutate(prop = 100*(sum_Users/sum(sum_Users)))

### Bar Graph (2024/03/29) = 9704 Shelter population, 136 Program IDs 
plotCityTots <- ggplot(CityTots) +
  aes(x = CITY, y = sum_Users) +
  geom_col(fill = "darkblue") +
  labs(x = "GTA Region", 
       y = "Total Occupancy # (counts)") +
  theme_bw() +
  theme(plot.title = element_text(size = 14L,
                                  face = "bold", hjust = 0.5, vjust = 0),
        axis.title.y = element_text(size = 12L, face = "bold"),
        axis.title.x = element_text(size = 12L, face = "bold"))

### Create Interactive Plot with "ggplotly" package
plotCityTotsly <- ggplotly(plotCityTots)
plotCityTotsly <- plotCityTotsly %>% toWebGL()
plotCityTotsly

```

</div>
**Figure 10. Current Shelter Populations per GTA Region.** This bar graph shows the current (2024-04-21) number of shelter occupants within each of the designated **GTA** regions. Toronto (68.5%) and North York (18.3%) shelter the majority of homeless people, while Scarborough (8.7%), Etobicoke (3.9%), and Vaughan (0.6%) collectively house less than 14% of the homeless population.

<br>
<br>

<div align=center>
**Figure 11: GTA Shelter Population (DSOSO)**<br>
**(Shelter Sector Numbers)**<br>

```{r echo=FALSE, message=FALSE, warning=FALSE, fig.height=8, out.width='100%', fig.align='center'}
### ***************************************************************
### ********** GRAPH 8 - TOTAL # vs TIME (SECTOR FACETS) **********
### ***************************************************************

### Use "group by" and "sum" functions to sum up observations
### Total Population per "SECTOR"
df3NAsector <- df3.NA %>%
  group_by(OCCUPANCY_DATE, SECTOR) %>%
  summarise(n_observ = n(), sum_Users = sum(SERVICE_USER_COUNT))

###### Plot Total Shelter Population per "SECTOR" Facets
plotSector <- df3NAsector %>% filter(!(SECTOR %in% "")) %>%
  ggplot() +
  aes(x = OCCUPANCY_DATE, y = sum_Users, group = SECTOR) +
  geom_line(colour = "darkblue") +
  labs(x = "Date",
       y = "Total Occupancy # (counts)") +
  theme_bw() +
  theme(plot.title = element_text(size = 14L,
                                  face = "bold", hjust = 0.5, vjust = 0),
        axis.title.y = element_text(size = 12L, face = "bold"),
        axis.title.x = element_text(size = 12L, face = "bold"),
        plot.background = element_rect(fill = "white"),
        panel.grid.minor = element_blank()) +
  facet_wrap(vars(SECTOR), scales = "free_y", ncol = 3L, nrow = 3L)

### Create Interactive Plot with "ggplotly" package
plotSectorly <- ggplotly(plotSector)
plotSectorly <- plotSectorly %>% toWebGL()
plotSectorly

```

</div>
**Figure 11. Homeless Demographics within the GTA Region.** The above graph looks at some homeless demographics within the **GTA**. The number of individuals within each of the designated homeless groups (i.e. **men**, **women**, **families**, **Youth** and **Mixed adults**) have rapidly increased over the last 3 years. Also, the size of the **Mixed adult** population has fluctuated quite dramatically over the past two years. Possible reasons for this may be due to the fluctuating number of designated "*mixed adult*" shelter spaces. For example, some service providers, like Homes First, are unilaterally transitioning some of their shelter spaces (e.g. Delta Hotel Shelter, Scarborough) to a select homeless population (i.e. refugee only) at the expense of other homeless people (i.e. non-refugees mixed adult population). Note that the fate of the Delta non-refugee homeless population has largely being determined by Ward 22 councillor Nick Mantas, who's NIMBY motion to rid the Delta shelter of non-refugee residents was passed by Toronto City Council meeting back in Feb 2024.

<br>
<br>

<div align=center>
**Figure 12: GTA Shelter Population (DSOSO)**<br>
**(Program Model Numbers)**<br>

```{r echo=FALSE, message=FALSE, warning=FALSE, fig.height=6, out.width='100%', fig.align='center'}
### ****************************************************************
### ******* GRAPH 9 - TOTAL # vs TIME (PROGRAM MODEL FACETS) *******
### ****************************************************************

### Use "group by" and "sum" functions to sum up observations
### Total Population per "PROGRAM MODEL"
df3NAprogmodel <- df3.NA %>%
  group_by(OCCUPANCY_DATE, PROGRAM_MODEL) %>%
  summarise(n_observ = n(), sum_Users = sum(SERVICE_USER_COUNT))

###### Remove NA using **complete.cases** function from "stats" package
df3NAprogmodel.noNA <- df3NAprogmodel[complete.cases(df3NAprogmodel), ]

###### Also can remove NA using **na.omit** function from "stats" package
df3NAprogmodel.noNA2 <- na.omit(df3NAprogmodel)

###### Plot Total Shelter Population per "PROGRAM MODEL" Facets
plotPMtotals <- df3NAprogmodel.noNA %>% filter(!(PROGRAM_MODEL %in% "")) %>%
  ggplot() +
  aes(x = OCCUPANCY_DATE, y = sum_Users, group = PROGRAM_MODEL) +
  geom_line(colour = "darkblue") +
  labs(x = "Date",
       y = "Total Occupancy # (counts)") +
  theme_bw() +
  theme(plot.title = element_text(size = 14L,
                                  face = "bold", hjust = 0.5, vjust = 0),
        axis.title.y = element_text(size = 12L, face = "bold"),
        axis.title.x = element_text(size = 12L, face = "bold"),
        plot.background = element_rect(fill = "white"),
        panel.grid.minor = element_blank()) +
  facet_wrap(vars(PROGRAM_MODEL),
             scales = "free_y", ncol = 3L, nrow = 3L)

### Create Interactive Plot with "ggplotly" package
plotPMtotalsly <- ggplotly(plotPMtotals)
plotPMtotalsly <- plotPMtotalsly %>% toWebGL()
plotPMtotalsly

```

</div>
**Figure 12. Homeless Population Program Model.** The above graph looks at the designated **Emergency** and **Transitional** shelter programs within the **GTA**. According to City of Toronto's **Housing + Homelessness Service Glossary (2019)<sup>10</sup>** the **Emergency Shelter Program** constitutes a homeless shelter program that individuals and families can access without a referral. By contrast a **Transitional Shelter Program** constitutes a homeless program that individuals and families can access <u>only</u> with a <u>referral</u>. The plotted **DSOSO** data clearly shows that only ~1 out of every 10 homeless individuals have been able to access a <u>referral</u>. This poor referral rate is also evident from the data plotted in **Figure 4** and **Figure 5**.

<br>
<br>

<div align=center>
**Figure 13: GTA Shelter Population (DSOSO)**<br>
**(Service Type Numbers)**<br>

```{r echo=FALSE, message=FALSE, warning=FALSE, fig.height=10, out.width='100%', fig.align='center'}
### ***************************************************************
### ******* GRAPH 10 - TOTAL # vs TIME (SERVICE TYPE FACETS) *******
### ***************************************************************

### Use "group by" and "sum" functions to sum up observations
### Total Population per "SERVICE TYPE"
df3NAservtype <- df3.NA %>%
  group_by(OCCUPANCY_DATE, SERVICE_TYPE) %>%
  summarise(n_observ = n(), sum_Users = sum(SERVICE_USER_COUNT))

# anyNA(df3NAservtype)
# anyNA(df3NAservtype$SERVICE_TYPE)
# anyNA(df3NAservtype$sum_Users)

###### Remove NA using **complete.cases** function from "stats" package
df3NAservtype.noNA <- df3NAservtype[complete.cases(df3NAservtype), ]

###### Plot Total Shelter Population per "SERVICE TYPE" Facets
plotSTtotals <- df3NAservtype.noNA %>% filter(!(SERVICE_TYPE %in% "")) %>%
  ggplot() +
  aes(x = OCCUPANCY_DATE, y = sum_Users, group = SERVICE_TYPE) +
  geom_line(colour = "darkblue") +
  labs(x = "Date",
       y = "Total Occupancy # (counts)") +
  theme_bw() +
  theme(plot.title = element_text(size = 14L,
                                  face = "bold", hjust = 0.5, vjust = 0),
        axis.title.y = element_text(size = 12L, face = "bold"),
        axis.title.x = element_text(size = 12L, face = "bold"),
        plot.background = element_rect(fill = "white"),
        panel.grid.minor = element_blank()) +
  facet_wrap(vars(SERVICE_TYPE),
             scales = "free_y", ncol = 3L, nrow = 4L)

### Create Interactive Plot with "ggplotly" package
plotSTtotalsly <- ggplotly(plotSTtotals)
plotSTtotalsly <- plotSTtotalsly %>% toWebGL()
plotSTtotalsly

```

</div>
**Figure 13. Homeless Overnight Service Types within the GTA.** Homeless individuals within the **GTA** can access different types of overnight services, including: **(i) Shelters**, **(ii) 24-Hour Respites**, **(iii) Motels/Hotels**, **(iv) Interim Housing**, **(v) Warming Centres**, **(vi) 24-Hour Women’s Drop-ins**, and **(vii) Isolation/Recovery Sites**. There are a few other **Service Types** offered, but they are ill-defined and accessed by very few people. As of April 21<sup>st</sup> 2024 the vast majority of **Service Types** are emergency type **Shelter** (4845, or 48.9%) and **Motel/Hotel** (4461, or 45%) services. Unfortunately, services that help homeless people transition to safer and more affordable permanent housing are largely non-existent within the Toronto Shelter system.

<br>
<br>

<div align=center>
**Figure 14: GTA Shelter Population (DSOSO)**<br>
**(Program Area Numbers)**<br>

```{r echo=FALSE, message=FALSE, warning=FALSE, fig.height=8, out.width='100%', fig.align='center'}
### ***************************************************************
### ******* GRAPH 11 - TOTAL # vs TIME (PROGRAM AREA FACETS) *******
### ***************************************************************

### Use "group by" and "sum" functions to sum up observations
### Total Population per "PROGRAM AREA"
df3NAPA <- df3.NA %>%
  group_by(OCCUPANCY_DATE, PROGRAM_AREA) %>%
  summarise(n_observ = n(), sum_Users = sum(SERVICE_USER_COUNT))

###### Remove NA using **complete.cases** function from "stats" package
df3NAPA.noNA <- df3NAPA[complete.cases(df3NAPA), ]

### Plot "Program Area" Facets
plotdf3NAPA <- df3NAPA.noNA %>% filter(!(PROGRAM_AREA %in% "")) %>%
  ggplot() +
  aes(x = OCCUPANCY_DATE, y = sum_Users) +
  geom_line(colour = "darkblue") +
  labs(x = "Date",
       y = "Occupancy # (counts)") +
  theme_bw() +
  theme(plot.title = element_text(size = 14L,
                                  face = "bold", hjust = 0.5, vjust = 0),
        axis.title.y = element_text(size = 12L, face = "bold"),
        axis.title.x = element_text(size = 12L, face = "bold"),
        plot.background = element_rect(fill = "white"),
        panel.grid.minor = element_blank()) +
  facet_wrap(vars(PROGRAM_AREA),
             scales = "free_y", ncol = 3L, nrow = 2L)

### Create Interactive Plot with "ggplotly" package
plotdf3NAPAly <- ggplotly(plotdf3NAPA)
plotdf3NAPAly <- plotdf3NAPAly %>% toWebGL()
plotdf3NAPAly

```

</div>
**Figure 14. Homeless Program Area within the GTA.** Homeless programs can be categorized as either: **(i) Base Shelter**, **(ii) Base Program - Refugee**, **(iii) Temporary Refugee Response**, **(iv) COVID-19 Response**, or **(v) Winter Response**. Generally they can be classified as either regular (i.e. year-round) or temporary programs. The rising numbers of homeless refugees and along with the long-term health and economic impacts of the COVID-19 pandemic appears to be driving the growing homeless population within the **GTA**. Even the cyclic **Winter Response** program, which normally spikes during the cold season, experienced a considerable rise in the number of homeless people during the last winter season.

<br>
<br>

<div align=center>
**Figure 15: Homes First - Mixed Adult COVID-19 Program, Delta Hotel Shelter**<br>
**(DSOSO: # Occupants)**<br>

```{r echo=FALSE, message=FALSE, warning=FALSE, out.width='90%', fig.align='center'}
### *****************************************************************
### ** GRAPH 12 - TOTAL # for PID16011 (2035 Kennedy Rd) 2024-03-29 **
### *****************************************************************

#### Use logic function "subset" to select SVdt rows
#### that only have Program ID == "16011" (2035 Kennedy Rd shelter)
df3NAPID16011 <- subset(df3.NA, PROGRAM_ID == "16011")

### Plot Occupancy data for ProgID 16011 (2035 Kennedy Rd)
plot3 <- ggplot(data = df3NAPID16011,     # data set
  mapping = aes(                          # map aesthetics
    x = OCCUPANCY_DATE,                   # map x y axis values
    y = SERVICE_USER_COUNT)) +
  geom_point(color = "darkblue", size = 2, alpha = 0.4)+
  labs(x = "Occupancy Date",
       y = "Occupancy # (counts)") +
  theme_bw()

plot3b <- plot3 +     # theme adjustments
  theme_bw() +
  theme(
    plot.title = element_text(size = 14L,
                              face = "bold", hjust = 0.5, vjust = 0),
    axis.text.x = element_text(size = 10L),
    axis.text.y = element_text(size = 10L),
    axis.title = element_text(size = 12L),
    plot.background = element_rect(fill = "white"))

plot4 <- ggplot(data = df3NAPID16011,     # data set
  mapping = aes(                          # map aesthetics
    x = OCCUPANCY_DATE,                   # map x y axis values
    y = Rooms_Unavailable)) +
  geom_point(color = "darkblue", size = 2, alpha = 0.2)+
  labs(x = "Occupancy Date",
       y = "# Rooms Unavailable",
       title = "Figure 9: Homes First Mixed Adult Delta Hotel Shelter",
       subtitle = "(Unavailable Room Counts)",
       caption = stringr::str_glue("Current: {max(df3NAPID16011$OCCUPANCY_DATE, na.rm=T)}")) +
  theme_bw()

plot4b <- plot4 + theme_classic() +
  theme(plot.title = element_text(size = 14L),         # theme adjustments
    plot.caption = element_text(size = 8L, hjust = 0), # left-align caption
    plot.subtitle = element_text(face = "italic"),
    axis.text.x = element_text(size = 10L),
    axis.text.y = element_text(size = 10L),
    axis.title = element_text(size = 12L),             # adjusts axes titles
    plot.background = element_rect(fill = "white"))  

# Plot3b with marginal histograms
plot3bm <- ggMarginal(
  plot3b,                         # add marginal histograms
  margins = "y",
  size = 3,
  type = "histogram",             # specify histograms
  fill = "lightblue",             # bar fill
  yparams = list(binwidth = 2))   # bin width for y-axis marginal

# Plot4b with marginal histograms
plot4bm <- ggMarginal(
  plot4b,                         # add marginal histograms
  margins = "y",
  size = 3,
  type = "histogram",             # specify histograms
  fill = "lightblue",             # bar fill
  yparams = list(binwidth = 1))   # bin width for y-axis marginal

### Create Interactive Plot with "ggplotly" package
plot3bly <- ggplotly(plot3b)
plot3bly <- plot3bly %>% toWebGL()
plot3bly

```

</div>

<br>

<div align=center>
**Figure 16: Homes First - Mixed Adult COVID-19 Program, Delta Hotel Shelter**<br>
**(DSOSO: # Unavailable Rooms)**<br>

```{r echo=FALSE, message=FALSE, warning=FALSE, fig.height=5, out.width='100%', fig.align='center'}
### *******************************************************************
### ** GRAPH 13 - TOTAL #s for PID16011 (2035 Kennedy Rd) 2024-03-29 **
### *******************************************************************
plot16011 <- df3NAPID16011 %>%
  filter(OCCUPANCY_DATE >= "2024-01-04" & OCCUPANCY_DATE <= "2024-04-21") %>%
  ggplot() +
  aes(x = OCCUPANCY_DATE,
      y = Rooms_Unavailable,
      colour = Room_Capacity) +
  geom_point(shape = "circle", size = 3L) +
  geom_smooth(span = 0.5) +
  scale_color_distiller(palette = "Blues", direction = 1) +
  labs(x = "Date",
       y = "Unavailable Rooms (counts)") +
  theme_bw() +
  theme(plot.title = element_text(size = 14L,
                                  face = "bold", hjust = 0.5, vjust = 0),
        axis.title.y = element_text(size = 12L, face = "bold"),
        axis.title.x = element_text(size = 12L, face = "bold"),
        legend.justification = c(1,0),
        legend.position = c(0.99,0.1))

### Create Interactive Plot with "ggplotly" package
plot2035Kenly <- ggplotly(plot16011)
plot2035Kenly <- plot2035Kenly %>% toWebGL()
plot2035Kenly

```

</div>
**Figure 15 & 16. Homes First's Delta Hotel Shelter.** These two graphs show the number of rooms at the Delta Hotel Shelter that are either occupied (**Figure 15**) or unoccupied (**Figure 16**). Although the number of occupants have been steadily decreasing between Feb 5<sup>th</sup> to April 4<sup>th</sup>, the recent influx of refugees has rapidly corrected these falling numbers. The rapid changes in the number of people sheltered at the Delta Hotel over the past 2 months is also reflected in the number of unavailable rooms at the Delta shelter (**Figure 16**). The fitted **Loess** (**LO**cal regr**ESS**ion) curve is fairly <u>well defined</u> (i.e. residuals are fairly constant over the chosen range of x values), which suggests "*real*" trends in the data (e.g. rapid increase in # unavailable rooms between Feb 5th and April 4th, followed by a quick reversal of this trend between April 4th to present). Nevertheless, it is important to note that the overnight **Delta Hotel Shelter** (Program ID 16011) supervised by **Homes First** is, according to **DSOSO** records, a <u>designated</u> mixed adult (Sector) shelter that falls under the emergency COVID-19 Program. So it is by definition <u>not</u> a refugee-only shelter space. According to **Homes First**, which runs many other additional shelter and supportive housing sites, their mission is to "*develop and provide affordable, stable housing and support services to break the cycle of homelessness for people with the fewest housing options*". However, despite the continuing rise in the number of homeless persons in Toronto (**Fig. 6**,**8**,**11**,**12**), as well as the recent influx of Federal dollars (**<a class="one" href="https://www.cbc.ca/news/canada/toronto/asylum-seeker-shelter-funding-toronto-1.7102849">$162 million</a>**) to support the Toronto shelter system, **Homes First** has unilaterally decided to transition the **Delta** Hotel Shelter to a refugee only space (i.e. no consultations with residents). Apparently, in accordance with the wishes of local Ward 22 councillor Nick Mantas, the shelter is actively trying to move or evict people from the safety of the shelter. Many have already faced punitive "*service restrictions*" without any appeals process. Even the recent updated appeals process typically results in the eviction of the client at the end of the restriction period. It is important to note that during the time it takes to resolve the appeal process the client is removed from the shelter and forced to find accommodations on their own (i.e. left homeless). Homes First's exclusion of the Delta residents from any decision making process, one that directly impacts their immediate and future well being, is both imprudent and overtly punitive in nature. Many residents are afraid that they will be forced to move back onto the streets, or to some unsafe open congregate shelter space. The non-transparent nature of this decision making process has only heightened the homeless residents' fears, anxiety and distrust of Homes First. This situation has only been exacerbated by the lack of available housing workers who are suppose to be working with the Delta's homeless residents. The current drive to transition the Delta hotel to a refugee-only shelter, at the expense of the non-refugee homeless population, is perplexing given the recent influx of Federal dollars into the Toronto shelter system. 

<br>
<br>


### References

**1.** Havi Echenberg and Laura Munn-Rivard (2020). Defining and Enumerating Homelessness in Canada. Publication No. 2020-41-E, Parliamentary Information and Research Service, &copy; Library of Parliament, Ottawa, Canada 2020.

**2.** **<a class="one" href="https://open.canada.ca/data/en/dataset/7e0189e3-8595-4e62-a4e9-4fed6f265e10/resource/5e3c9df6-ffbd-49a8-a7a7-de9629c2f458">The National Service Provider List - The National Service Provider List - 2022</a>**.  

**3.** Statistics Canada. Table 14-10-0353-01 **<a class="one" href="https://www150.statcan.gc.ca/t1/tbl1/en/tv.action?pid=1410035301">Homeless Shelter Capacity in Canada from 2016 to 2022, Infrastructure Canada</a>**. DOI: https://doi.org/10.25318/1410035301-eng  

**4.** Gaetz, S.; Barr, C.; Friesen, A.; Harris, B.; Hill, C.; Kovacs-Burns, K.; Pauly, B.; Pearce, B.; Turner, A.; Marsolais, A. (2012). Canadian Definition of Homelessness. Toronto: Canadian Observatory on Homelessness Press. www.homelesshub.ca/homelessdefinition

**5.** Laird, Gordon (2007). **<a class="one" href="https://www.homelesshub.ca/resource/shelter-homelessness-growth-economy-canadas-21st-century-paradox-report-sheldon-chumir">SHELTER - Homelessness in a growth economy: Canada’s 21st century paradox.</a>** Report for the Sheldon Chumir Foundation for Ethics in Leadership.

**6.** Gaetz, Stephen (2012). **<a class="one" href="https://www.homelesshub.ca/costofhomelessness">The Real Cost of Homelessness: Can We Save Money by Doing the Right Thing?</a>** Toronto: Canadian Homelessness Research Network Press.

**7.** City of Toronto (2024). **<a class="one" href="https://open.toronto.ca/dataset/central-intake-calls/">Central Intake Calls</a>** (**CIC**).

**8.** City of Toronto (2024). **<a class="one" href="https://open.toronto.ca/dataset/toronto-shelter-system-flow/">Toronto Shelter System Flow</a>** (**TSSF**).

**9.** City of Toronto (2024). **<a class="one" href="https://open.toronto.ca/dataset/daily-shelter-overnight-service-occupancy-capacity/">Daily Shelter and Overnight Service Occupancy and Capacity</a>** (**DSOSO**).

**10.** City of Toronto - Housing Stability Service System Overview (2019). **<a class="one" href="https://www.toronto.ca/city-government/data-research-maps/research-reports/housing-and-homelessness-research-and-reports/housing-stability-service-system-map-and-terms/">Housing + Homelessness Service Glossary</a>**.


